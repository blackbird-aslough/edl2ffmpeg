# Automatically load the Nix development environment
# Requires direnv to be installed and allowed for this directory

# For flake users (recommended)
if [ -f flake.nix ]; then
  use flake
# For traditional nix-shell users
elif [ -f shell.nix ]; then
  use nix
fi

# Project-specific environment variables
export EDL2FFMPEG_DEV=1

# Optional: Set build directory
export BUILD_DIR="${PWD}/build"

# Optional: Enable color output for build tools
export CLICOLOR_FORCE=1

# Create build directory if it doesn't exist
mkdir -p "$BUILD_DIR"

# Helpful aliases for development
alias build='./build-nix.sh'
alias build-debug='./build-nix.sh --debug'
alias build-release='./build-nix.sh --release'
alias test='cd "$BUILD_DIR" && ctest --output-on-failure'
alias clean='rm -rf "$BUILD_DIR"/*'

echo "edl2ffmpeg development environment loaded"
echo "Aliases available: build, build-debug, build-release, test, clean"